<!--Copyright: "Copyright (c) 2021 HangYan"-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>FILE MANAGEMENT SYSTEM</title>
{#    <meta charset="utf-8">#}
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="og:title" content="Template Monster Admin Template">
    <meta property="og:description"
          content="brevis, barbatus clabulares aliquando convertam de dexter, peritus capio. devatio clemens habitio est.">
    <link rel="stylesheet" href="/static/components/base/base.css">
    <style>
        .btn.topaz {
            {#border-top-left-radius: 32px !important;#}
            border-top-right-radius: 60px;
            border-bottom-right-radius: 60px;
            border-bottom-left-radius: 60px;
        }
        .btn.topaz:hover {
            {#background-color: #1c54e2;#}
            {#color: #1c54e2;#}
        }

    </style>


</head>
<body>
<div class="page">
    <!--RD Navbar-->

    <header class="section rd-navbar-wrap rd-navbar-wrap-transparent">
        <nav id="shop_header" class="rd-navbar rd-navbar-solid rd-navbar-transparent"
             data-rd-navbar='{"responsive":{"1200":{"stickUpOffset":"164px"}}}'>
            <div class="navbar-section navbar-non-stuck">
                <div class="navbar-panel">
                    <button class="navbar-switch mdi-menu novi-icon" data-multi-switch='{"targets":".rd-navbar","scope":".rd-navbar","isolate":"[data-multi-switch]"}'></button>
                    <div class="navbar-logo">
                        <a class="navbar-navigation-root-link" href="/" style="width: 160%; font-size: 128%; font-weight: 500; margin-top: -4%;"> Meow Shop </a>
                    </div>
                </div>
                <div class="navbar-container">
                    <div class="navbar-cell flex-grow-1">
                        <div class="navbar-info">
                            <div class="list list-icons-2">
                                <div class="list-item">
                                    <li class="navbar-navigation-root-item">
                                        <a id="shop_title" class="navbar-navigation-root-link" href="/"
                                           style="font-size: 28px; font-weight: 500;"> Meow Shop </a>
                                    </li>



                                </div>
                            </div>
                            <div class="navbar-logo navbar-fullwidth-logo">
                                <a class="navbar-logo-link" href="index.html">
                                </a>
                            </div>
                            <div class="text-block text-block-2 d-md-flex align-items-center justify-content-center">
                                <div class="list list-icons-2" >
                                    <div id="shop_phone" class="list-item" style="display: none">
                                        <div class="list-icon icon onclinic-phone"></div>
                                        <span class="h5"><a class="link" href="tel:#">Contact: +8615600803270</a></span>
                                    </div>

{#                                    {% if username == None %}#}
{#                                            <a class="navbar-navigation-root-link" style="display: inline-block; " href="/login">#}
{#                                                <span id="username" class="mdi-account-outline" style="display: inline-block"> Log in </span>#}
{#                                            </a>#}
{#                                            <a class="navbar-navigation-root-link" style="display: inline-block; " href="/logout">#}
{#                                                <span id="username" class="mdi-logout" style="display: inline-block"> Log out </span>#}
{#                                            </a>#}
{##}
{#                                        {% else %}#}
{#                                            <a class="navbar-navigation-root-link" style="display: inline-block; " href="/user_info">#}
{#                                                <span id="username" class="mdi-account" style="display: inline-block"> {{ username }} </span>#}
{#                                            </a>#}
{#                                            <a class="navbar-navigation-root-link" style="display: inline-block; " href="/logout">#}
{#                                                <span id="username" class="mdi-logout" style="display: inline-block"> Log out </span>#}
{#                                            </a>#}
{##}
{#                                    {% end %}#}

                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="navbar-cell">
                        <div class="navbar-subpanel">
                            <div class="navbar-subpanel-item">
                                <button class="navbar-button navbar-info-button mdi-dots-vertical novi-icon"
                                        data-multi-switch='{"targets":".rd-navbar","scope":".rd-navbar","class":"navbar-info-active","isolate":"[data-multi-switch]"}'></button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="navbar-section">
                <div class="navbar-container navbar-sidebar" style="margin-top: 1%">
                    <div class="navbar-cell flex-grow-1" style="border-bottom: 1px solid #dde0e9;">
                        <ul class="navbar-navigation rd-navbar-nav" style="margin-left: 58px">
                            <li class="navbar-navigation-root-item active" style="margin-left: -58px">
                                <a class="navbar-navigation-root-link" style="display: inline-block; " href="/">
                                    <span class="product-btn btn topaz btn-icon mdi-home"
                                          style="display: inline-block; border: 1px solid white;"> Home </span>
                                </a>
                            </li>
                            <li class="navbar-navigation-root-item active" style="margin-left: -58px">
                                <a class="navbar-navigation-root-link" style="display: inline-block; " href="/store_catalog">
                                    <span class="product-btn btn topaz btn-icon mdi-shopping"
                                          style="display: inline-block; border: 1px solid white;">
                                        Store
                                    </span>
                                </a>
                            </li>

                            <li class="navbar-navigation-root-item" style="margin-left: -58px;">
                                <a class="navbar-navigation-root-link" style="display: inline-block; "
                                   href="/package_list">
                                    <span class="product-btn btn topaz btn-icon mdi-cake "
                                          style="display: inline-block; border: 1px solid white;"> Membership </span>
                                </a>
                            </li>
                            <li class="navbar-navigation-root-item" style="margin-left: -58px;">
                                <a class="navbar-navigation-root-link" style="display: inline-block; "
                                   href="/order_list">
                                    <span class="product-btn btn topaz btn-icon mdi-book"
                                          style="display: inline-block; border: 1px solid white;"> Order List </span>
                                </a>
                            </li>
{#                            <li class="navbar-navigation-root-item" style="margin-left: -58px;">#}
{#                                <a class="navbar-navigation-root-link" style="display: inline-block; "#}
{#                                   href="/user_info">#}
{#                                    <span class="product-btn btn topaz btn-icon mdi-account"#}
{#                                          style="display: inline-block; border: 1px solid white;"> My Account </span>#}
{#                                </a>#}
{#                            </li>#}


                            <li class="navbar-navigation-root-item rd-navbar--has-dropdown rd-navbar-submenu"  style="margin-left: -58px; min-width: 248px">
                                <a class="navbar-navigation-root-link" style="display: inline-block; " href="/user_info">
                                    <span class="product-btn btn topaz btn-icon mdi-note-outline"
                                          style="display: inline-block; border: 1px solid white;"> My Account </span>
                                </a><span class="rd-navbar-submenu-toggle"></span>
                                <ul class="navbar-navigation-dropdown rd-navbar-dropdown">
                                    <li class="navbar-navigation-back">
                                        <button class="navbar-navigation-back-btn">Back</button>
                                    </li>
                                    <li class="navbar-navigation-dropdown-item">
                                        <a class="navbar-navigation-dropdown-link" href="/my_items">My Items</a>
                                    </li>
                                    <li class="navbar-navigation-dropdown-item">
                                        <a class="navbar-navigation-dropdown-link" href="/user_info">Account </a>
                                    </li>
                                </ul>
                            </li>


                            <li class="navbar-navigation-root-item rd-navbar--has-dropdown rd-navbar-submenu"
                                style="margin-left: -58px;">
                                <a class="navbar-navigation-root-link" style="display: inline-block; " href="/about_us">
                                    <span class="product-btn btn topaz btn-icon mdi-note-outline"
                                          style="display: inline-block; border: 1px solid white;"> About </span>
                                </a><span class="rd-navbar-submenu-toggle"></span>
                                <ul class="navbar-navigation-dropdown rd-navbar-dropdown">
                                    <li class="navbar-navigation-back">
                                        <button class="navbar-navigation-back-btn">Back</button>
                                    </li>
                                    <li class="navbar-navigation-dropdown-item">
                                        <a class="navbar-navigation-dropdown-link" href="/about_us">About Us</a>
                                    </li>
                                    <li class="navbar-navigation-dropdown-item">
                                        <a class="navbar-navigation-dropdown-link" href="https://github.com/Topaz1618?tab=repositories">Github</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </nav>
    </header>

    <section class="section section-md bg-primary-lightest" style="">
        <div class="container">
            <div class="row justify-content-center text-center" style="margin-top: 2%;">
            <div class="col-md-8">
              <div class="box box-form-1 section-offset-item">
                <div class="box-header">
                  <h3 class="box-title"> Create Account

                  </h3>
                </div>
                <div class="box-body">
                  <div class="rd-form rd-mailform" data-form-output="contact-form-1" data-form-type="contact"  novalidate="novalidate">

                    <div class="form-group">
                      <label class="form-label" for="phone">* Email </label>
                      <div class="form-control-wrap">
                        <input oninput="EmailListen(this)" class="form-control form-control-has-validation form-control-last-child" id="phone" type="text" name="phone" placeholder="" data-constraints="@Required">
                          <span class="form-validation"></span>
                      </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="password">* Password </label>
                      <div class="form-control-wrap">
                        <input type="password" oninput="passwordListen(this)" class="form-control form-control-has-validation form-control-last-child" id="password"  name="password"  data-constraints="@Required">
                          <span class="form-validation"></span>
                      </div>

                    </div>
                    <div class="form-group">
                        <label class="form-label" for="password">* Confirm Password </label>
                      <div class="form-control-wrap">
                        <input type="password" oninput="PasswordMatch(this)" class="form-control form-control-has-validation form-control-last-child" id="password1"  name="password"  data-constraints="@Required">
                          <span class="form-validation"></span>
                      </div>

                    </div>

                    <div class="rd-form-btn text-left" style="margin-top: 6%">
                      <button class="btn btn-lg btn-primary" onclick="CreateUser()">Submit</button>
                        <a class="btn btn-lg btn-primary" href="/"><span>Back</span></a>

                    </div>
                    <div class="rd-form-meta small">
                     <p style="color: #26455561; font-size: 0.88rem;">
                         <span style="display: inline-block; ">Back Home: </span>
                        <a class="link " href="/" style="font-size: 0.98rem;">Meow Shop</a>

                     </p>
                    </div>
                  </div>


                  <div class="form-output snackbar snackbar-primary" id="contact-form-1"></div>
                </div>
              </div>
            </div>

            </div>
        </div>
    </section>


    <section class="footer footer-dark context-dark bg-800" style="margin-top: 8%">
        <div class="container">
            <div class="row row-30">
                <div class="col-sm-6 col-lg-3">
                    <!-- Logo-->
                    <div class="logo">
                        <a class="logo-link" href="/">
{#                            <img class="logo-image-default" src="/static/images/meowfile.png" alt="Airy" width="146" height="36">#}
                            <img class="logo-image-inverse" src="/static/images/meowshop.png" alt="Meow Shop" width="146" height="36">
                        </a>
                    </div>
                    <p>Meow Shop is a full-featured mall, including background management, payment, order viewing, etc. </p>
                    <div class="social group-20">
{#                        <a class="social-icon icon icon-md icon-link onclinic-instagram" href="#"></a>#}
                    </div>
            </div>

                <div class="col-sm-6 col-lg-3">
                    <h5 class="footer-title">Contacts</h5>
                    <ul class="list list-icons">
                        <li class="list-item">
                            <div class="list-icon onclinic-map-marker"></div>
                            ChaoYang, Beijing
                        </li>
                        <li class="list-item">
                            <div class="list-icon onclinic-phone"></div>
                            +8615600803270
                        </li>
                        <li class="list-item">
                            <div class="list-icon onclinic-email-open"></div>
                            topaz1668@gmail.com
                        </li>

                    </ul>

                </div>

                <div class="col-sm-6 col-lg-3">
                    <h5 class="footer-title">Useful Links</h5>
                    <ul class="list list-sm">
                      <li class="list-item"><a href="https://topaz1618.github.io/about/">About</a></li>
                      <li class="list-item"><a href="https://topaz1618.github.io/projects/">Projects</a></li>
                      <li class="list-item"><a href="https://topaz1618.github.io/blog/">Blog</a></li>
                    </ul>
                </div>



            </div>
        </div>
    </section>
    <footer class="footer footer-minimal context-dark bg-900">
        <div class="container">
        </div>
    </footer>
</div>
<!-- Preloader-->
<div class="preloader">
    <div class="preloader-inner">
        <div class="preloader-dot"></div>
        <div class="preloader-dot"></div>
        <div class="preloader-dot"></div>
        <div class="preloader-dot"></div>
    </div>
</div>

<div class="to-top mdi-chevron-up "></div>
</body>
</html>
<script src="/static/components/base/core.min.js"></script>
<script src="/static/components/base/script.js"></script>
<script type="text/javascript">
    var shop_header = document.getElementById("shop_header");
    var shop_title = document.getElementById("shop_title");

    function EmailListen(obj) {
        var val = obj.value;
        var re = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
        if (re.test(val)) {
            obj.nextElementSibling.innerText = "success";
        } else {
            obj.nextElementSibling.innerText = "Please Check Email Format";
            return false;
        }
    }

    function passwordListen(obj) {
        var val = obj.value;
        if (val.length < 8){
            obj.nextElementSibling.innerText = "Your password should be at least eight characters.";
            return false
        }
        var re = /^[A-Za-z0-9@#$%^&+=]{8,16}$$/;
        if (re.test(val)) {
            obj.nextElementSibling.innerText = "success";

        } else {
            obj.nextElementSibling.innerText = "Please Check Password Format";

            obj.nextElementSibling.innerText = "";
            return false;
        }
    }

    function PasswordMatch() {
        var password_el = document.getElementById("password");
        var password_el1 = document.getElementById("password1");

        var password = password_el.value;
        var password1 = password_el1.value;

        //var val2 = $('#password1').val();
        if (password == password1) {
            password_el1.nextElementSibling.innerText = "success";
        } else {
            password_el1.nextElementSibling.innerText = "";
            password_el1.nextElementSibling.innerText = "The two passwords are inconsistent";
            return false;
        }
    }


    function CheckParams(user_el, password_el, password_el1) {
        console.log(user_el, password_el, password_el1);
        if (user_el.value == ""){
            alert("Please enter username");
            return false;
        }

        var check_username = EmailListen(user_el);
        if (check_username == false){
            alert("Please Check Email Format");
            return false;
        }


        var check_password = passwordListen(password_el);
        if (check_password == false){
            alert("Please check the password ");
            return false;
        }

        var check_password1 = PasswordMatch();
        if (check_password1 == false){
            alert("The two passwords entered do not match");
            return false;
        }
    }

    function CreateUser() {
        var user_el = document.getElementById("phone");
        var password_el = document.getElementById("password");
        var password_el1 = document.getElementById("password1");

        var check_params  = CheckParams(user_el, password_el, password_el1);
        if (check_params == false){
            return
        }else {

            var username = user_el.value;
            var password = password_el.value;
            var password1 = password_el1.value;

            const formData = new FormData();
            formData.append("username", username);
            formData.append("password1", password);
            formData.append("password2", password1);

            $.ajax({
                url: "/register",
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    var error_code = response["error_code"];
                    if (error_code == "1000"){
                        console.log("1000", response["msg"]);
                        alert("User created successfully");
                        window.location.href = "/login"

                    } else{
                      alert(response["msg"]);
                    }

                }
            });
        }
    }


    {#var shop_phone = document.getElementById("shop_phone");#}
    var option = {
        attributes: true,
        attributeFilter: ['class']
    };

    var mutationObserver = new MutationObserver(function (mutations) {
        if (shop_header.className.indexOf('rd-navbar-fixed') != -1){
            shop_title.style.display = "None";
            {#shop_phone.style.display = "Block";#}
        }else{
            shop_title.style.display = "Block";
            {#shop_phone.style.display = "None";#}

        }
    });

    mutationObserver.observe(shop_header, option)

</script>
